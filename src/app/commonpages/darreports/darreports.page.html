<ion-header>
  <ion-toolbar color='primary'>
    <ion-buttons slot="start">
       <ion-back-button></ion-back-button> 
      <!-- <ion-menu-button autoHide="true"></ion-menu-button> -->

     
   
    </ion-buttons>
    <ion-title class="ion-text-center" > Detailed Accident Reports (e-DAR) </ion-title>

    <ion-icon slot="end" 
    name="help-circle-outline"
    size="large"
    (click)="openHelp()"
  ></ion-icon>

    </ion-toolbar>
</ion-header>




<ion-content *ngIf="generaldata">



 


  <div *ngFor="let gen of generaldata; let i = index ">


    <ion-card class='ion-text-center'>
      <ion-grid color='primary'>
        <ion-row color="primary" class="ion-justify-content-center">
          <div class="ion-text-center">
            <ion-text>
              <h4 style="font-size: 28px; font-weight: bold;">
               
                <span style='color:#024969;'>  Detailed Accident Reports</span> 
                <span style="color:#024969"> (e-D</span>
                <span style="color:#fddf00">A</span>
                <span style="color:#024969">R)</span>

                <br>
                <span  *ngIf="user.dept=='1'" style='color:#024969;'>  Police (IO) </span>
                <span  *ngIf="user.dept=='5'" style='color:#024969;'>  MACT </span>
                <span  *ngIf="user.dept=='6'" style='color:#024969;'>  State Legal Services Authority </span>
                <span  *ngIf="user.dept=='7'" style='color:#024969;'>  Insurance </span>
               
              </h4>
            </ion-text>
          </div>
        </ion-row>
      </ion-grid>
      <!-- <ion-item-divider> </ion-item-divider> -->
      <ion-card-header class="severity{{selacc.severity}}">

        <!-- <div class="shadow"><img class="logo"  *ngIf="user.dept=='1'" src="assets/logos/eDAR.svg"
          alt="" /></div> -->

        <ion-card-title style='font-size:18px;color:#001C54;'>
          <span style='color: #be03c4;'> ACCIDENT ID:</span> {{gen.accident_id}}
          <span style='color: #be03c4;'> FIR :</span> {{gen.fir_number}}

        </ion-card-title>


        <ion-card-title style='font-size:18px;color:#001C54;'>{{gen.datetime}},{{gen.getseverity}} </ion-card-title>
        <ion-card-title style='color:#001C54;'>{{selacc.landmark}} </ion-card-title>
        <br><hr>
        <!--<ion-card-subtitle style='font-size:16px; color:#001C54;'>
          <span style='color: #be03c4;'> PS : </span> 
          {{gen.get_ps_name}}(PS),{{gen.get_districtname}},{{gen.get_statename}}</ion-card-subtitle>

         <ion-grid *ngIf="flag=='1'">
          <ion-row class="ion-align-items-start">
            <ion-col (click)="ifformsubmitted()">
              <span style='color: #be03c4;'> MACT </span> :
              <span *ngIf="mactdetails" style='color: #001C54;'>{{mactdetails.courtname}}</span>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-start">
            <ion-col (click)="ifformsubmitted()">
              <span style='color: #be03c4;'> LSA </span> :
              <span *ngIf="legaldetails" style='color: #001C54;'>{{legaldetails.nameoflegalservice}}</span>

            </ion-col>
          </ion-row>
          <ion-row class="ion-align-items-start">
            <ion-col (click)="ifformsubmitted()">
              <span style='color: #be03c4;'> Insurance </span>

              <span *ngFor="let d of alreadyconnected; let i = index" style='color: #001C54;'> {{d.get_insurance.name }} ,</span>


            </ion-col>

          </ion-row>
        </ion-grid>
        <ion-grid *ngIf="flag=='0'">
          <ion-row class="ion-align-items-start">
            <ion-col (click)="ifnotformsubmitted()">
              <span style='color: #be03c4;'> MACT </span> :
              <span *ngIf="mactdetails" style='color: #001C54;'>{{mactdetails.courtname}}</span>
              <ion-icon color="primary" name="create-outline"></ion-icon>
            </ion-col>
          </ion-row>

          <ion-row class="ion-align-items-start">
            <ion-col (click)="ifnotformsubmitted()">
              <span style='color: #be03c4;'> LSA </span> :
              <span *ngIf="legaldetails" style='color: #001C54;' >{{legaldetails.nameoflegalservice}}</span>
              <ion-icon color="primary" name="create-outline"></ion-icon>

            </ion-col>
          </ion-row>
          <ion-row class="ion-align-items-start">
            <ion-col (click)="ifnotformsubmitted()">
              <span style='color: #be03c4;'> Insurance </span> :
              <span *ngFor="let d of alreadyconnected; let i = index" style='color: #001C54;' > {{d.get_insurance.name }} ,</span>
              <ion-icon color="primary" name="create-outline"></ion-icon>
            </ion-col>

          </ion-row>


        </ion-grid> -->

        <!-- <span style="text-align:center;color:#000; display: flex;flex: 1; text-align: center; white-space: wrap; font-size: 14px;">
          <span style='color: #be03c4;'> MACT </span> :
          <span *ngIf="mactdetails">{{mactdetails.courtname}}</span>
         <span style='color: #be03c4;'> LSA </span> :
              <span *ngIf="legaldetails">{{legaldetails.nameoflegalservice}}</span>
        </span> -->

        <!-- <span  style="display: flex;flex: 1; text-align: center; white-space: nowrap; font-size: 10px; color: rgb(0, 0, 0);"> 
          &nbsp; 
          <span *ngIf=" gen.io_user!=null "> &nbsp; IO:{{gen.io_user}} </span>
           
          </span> -->

  <ion-list  class="severity{{selacc.severity}}">
    <!-- <ion-list-header> Departments </ion-list-header> -->
    <ion-item style="border-radius: 5px" >
      <ion-label><span style='color: #be03c4;'> PS : </span>
        <span  style='color: #001C54;' > {{gen.get_ps_name}},{{gen.get_districtname}},{{gen.get_statename}} </span> 
        
      </ion-label>
    </ion-item>
    <ion-item style="border-radius: 5px" >
      <ion-label><span style='color: #be03c4;'> MACT : </span>
        <span *ngIf="mactdetails" style='color: #001C54;' > {{mactdetails.courtname}} </span> 
        <ion-icon *ngIf="flag=='0'" (click)="showdepts()" color="primary" name="create-outline"></ion-icon>
      </ion-label>
    </ion-item>
    <ion-item style="border-radius: 5px" >
      <ion-label><span style='color: #be03c4;'> LSA : </span>
        <span *ngIf="legaldetails" style='color: #001C54;' >  {{legaldetails.nameoflegalservice}} </span>
        <ion-icon *ngIf="flag=='0'"  (click)="showdepts()" color="primary" name="create-outline"></ion-icon>
      </ion-label>
    </ion-item>
    <ion-item style="border-radius: 5px" >
      <ion-label><span style='color: #be03c4;'> Insurance : </span>
        <span *ngFor="let d of alreadyconnected; let i = index" style='color: #001C54;' > {{d.get_insurance.name }} ,</span>
        <ion-icon  *ngIf="flag=='0'" (click)="showdepts()" color="primary" name="create-outline"></ion-icon>
      </ion-label>
    </ion-item>
  </ion-list>
  <div class="shadow" (click)="showdepts()" ><img class="logo"   *ngIf="user.dept=='1'" src="assets/logos/eDAR_logo1.png"
    alt="" /></div>
</ion-card-header>
    </ion-card>

  </div>

  <div *ngIf="reportdata">

    <ng-container *ngFor="let d of reportdata; let i = index">
    <ion-card class="accordion" [class]="d.get_edarupdateflag!=null?'submited':'pending'"  >
      <ion-card-content id="first" style="display: block" >

        <div  *ngIf="d.get_edarupdateflag &&  isShow(d.formno)" class="shadow"><img class="logo" 
          style="max-width: 30%; margin-left:50% ;margin-top: -16%; opacity: 1" src="assets/icon/submited.png"
          alt="" /></div>

          <div  *ngIf="d.get_edarupdateflag && !isShow(d.formno)" class="shadow"><img class="logo" 
            style="max-width: 30%; margin-left:50% ;margin-top: -16%; opacity: 1" src="assets/icon/received.png"
            alt="" /></div>

          <img
          src="assets/images/circle.svg"
          class="card-img-absolutes"
          alt=""
        />

        <p style="font-size: 22px;color:#001C54;"  >{{d.short_name}}</p>
        <div class="row" style="border-bottom:0px">
          <div class="col" style="font-size: 20px; color:#001C54;">{{d.description}}</div>
          <!-- <div class="col" style="padding-top: 20px"><hr></div> -->
         
        </div>
        <label *ngIf="!d.get_edarupdateflag" style="color: #fb7553fd">{{d.timing}} </label>
        <label *ngIf="d.get_edarupdateflag" style="color: #066a3bfd">Submitted On: {{d.get_edarupdateflag.submitedon}} </label>
        <div class="col" style="text-align: right;font-size: 25px"  >
         
          <ion-chip *ngIf="d.formno=='7'" outline color="danger" (click)="fixExamination()">
            <ion-icon name="information-circle-outline"></ion-icon>
            <ion-label>Examination</ion-label>
          </ion-chip>

          <ion-chip *ngIf="!d.get_edarupdateflag && isShow(d.formno)" outline color="danger" (click)="submitdoc(d)">
            <ion-icon name="information-circle-outline"></ion-icon>
            <ion-label>Process</ion-label>
          </ion-chip>

           <ion-chip *ngIf="d.get_edarupdateflag" outline color="success" (click)="submitdoc(d)">
            <ion-icon name="information-circle-outline"></ion-icon>
            <ion-label>Processed</ion-label>
          </ion-chip> 

        </div>
      </ion-card-content>
  
     
    </ion-card>
</ng-container>


  </div>

  <!-- <ion-button expand="block" (click)="fixExamination()" color='danger'>Examination</ion-button> -->

</ion-content>
<style>
  ion-icon {
    font-size: 20px;
  }
</style>